
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data module &#8212; pycompwa</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Generate data samples" href="generate.html" />
    <link rel="prev" title="Additional Tools" href="../tools.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo-small.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">pycompwa</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../install.html">
   Installation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../install/source.html">
     Get the source code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../install/virtual-environment.html">
     Create a virtual environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../install/build.html">
     Build and install
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../usage.html">
   Usage
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../workflow.html">
     ComPWA Workflow
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../workflow/step1.html">
       Step 1: Create an amplitude model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../workflow/step2.html">
       Step 2: Generate data samples
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../workflow/step3.html">
       Step 3: Perform fit
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../workflow/step4.html">
       Step 4: Analyze results
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../tools.html">
     Additional Tools
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Data module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="generate.html">
       Generate data samples
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="particles.html">
       Particle database
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../develop.html">
   Help developing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../documents.html">
   Talks and Documents
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../api/pycompwa.html">
   API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/pycompwa.data.html">
     data
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.data.io.html">
       io
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.data.io.pawian.html">
         pawian
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.data.convert.html">
       convert
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.data.create.html">
       create
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.data.exception.html">
       exception
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.data.naming.html">
       naming
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/pycompwa.expertsystem.html">
     expertsystem
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.amplitude.html">
       amplitude
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
      <label for="toctree-checkbox-9">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.amplitude.abstractgenerator.html">
         abstractgenerator
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.amplitude.canonicaldecay.html">
         canonicaldecay
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.amplitude.helicitydecay.html">
         helicitydecay
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.solvers.html">
       solvers
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.state.html">
       state
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
      <label for="toctree-checkbox-10">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.state.conservationrules.html">
         conservationrules
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.state.particle.html">
         particle
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.state.propagation.html">
         propagation
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.topology.html">
       topology
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
      <label for="toctree-checkbox-11">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.topology.graph.html">
         graph
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.topology.topologybuilder.html">
         topologybuilder
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.ui.html">
       ui
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
      <label for="toctree-checkbox-12">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.ui.default_settings.html">
         default_settings
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.ui.system_control.html">
         system_control
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/pycompwa.plotting.html">
     plotting
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.plotting.rootplotdatareader.html">
       rootplotdatareader
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../api/pycompwa.ui.html">
     ui
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Related projects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://qrules.readthedocs.io">
   QRules
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://ampform.readthedocs.io">
   AmpForm
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://tensorwaves.readthedocs.io">
   TensorWaves
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://pwa.readthedocs.io">
   PWA Pages
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  ComPWA Organization
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://compwa-org.readthedocs.io">
   Website
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/ComPWA">
   GitHub Repositories
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://compwa-org.readthedocs.io/en/stable/about.html">
   About
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/usage/tools/data_module.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ComPWA/pycompwa"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ComPWA/pycompwa/issues/new?title=Issue%20on%20page%20%2Fusage/tools/data_module.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/ComPWA/pycompwa/edit/stable/docs/usage/tools/data_module.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ComPWA/pycompwa/stable?urlpath=lab/tree/docs/usage/tools/data_module.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/ComPWA/pycompwa/blob/stable/docs/usage/tools/data_module.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pwa-data-frame">
   PWA data frame
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-and-export-data">
   Import and export data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conversion-to-kinematic-variables">
   Conversion to kinematic variables
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="data-module">
<h1>Data module<a class="headerlink" href="#data-module" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="../../index.html"><span class="doc">pycompwa</span></a> is no longer maintained. Use the <a class="reference external" href="https://compwa-org.rtfd.io">ComPWA</a> packages <a class="reference external" href="https://qrules.rtfd.io">QRules</a>, <a class="reference external" href="https://ampform.rtfd.io">AmpForm</a>, and <a class="reference external" href="https://tensorwaves.rtfd.io">TensorWaves</a> instead!</p>
</div>
<p>The <a class="reference internal" href="../../api/pycompwa.data.html#module-pycompwa.data" title="pycompwa.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycompwa.data</span></code></a> module provides several tools for importing, exporting, and visualizing data. By data, we mean <em>event-wise collections of four-momentum tuples</em>, possibly organized by particle name. We choose to work with <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/index.html#module-pandas" title="(in pandas v1.3.4)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pandas</span></code></a> as a back-end, because it allows fast manipulation and visualization of data sets and can import and export to several standard data formats.</p>
<p>This notebook shows how to conveniently manipulate momentum tuple collections in such a way that they can be imported into ComPWA. It is also shown how to import data from other frameworks and how to do conversions to kinematic variables.</p>
<div class="section" id="pwa-data-frame">
<h2>PWA data frame<a class="headerlink" href="#pwa-data-frame" title="Permalink to this headline">¶</a></h2>
<p>Input data for PWA frameworks mainly consists of event-wise four-momentum tuples, grouped by particle. The core of the <a class="reference internal" href="../../api/pycompwa.data.html#module-pycompwa.data" title="pycompwa.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data</span></code></a> module is therefore handled by a specially formatted <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>. Such as specific format not only allows us to import and export to different file formats, but also to convert the data to ComPWA objects, such as an <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.EventCollection" title="pycompwa.ui.EventCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">EventCollection</span></code></a>.</p>
<p>The format is guaranteed through a decorator called <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.api.extensions.register_dataframe_accessor.html#pandas.api.extensions.register_dataframe_accessor" title="(in pandas v1.3.4)"><code class="xref py py-func docutils literal notranslate"><span class="pre">register_dataframe_accessor()</span></code></a>. Such an accessor extends a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with several properties, granted that the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> properly validates according to that accessor. In the <a class="reference internal" href="../../api/pycompwa.data.html#module-pycompwa.data" title="pycompwa.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data</span></code></a> module, this accessor is the <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PwaAccessor</span></code></a>. We call a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> that is formatted according to this accessor a <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWA</span> <span class="pre">DataFrame</span></code></a>.</p>
<p>To be sure, all this sounds a bit abstract. To illustrate the usage of this accessor, we therefore first have to create a skeleton <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWA</span> <span class="pre">DataFrame</span></code></a>. This can be done through the <a class="reference internal" href="../../api/pycompwa.data.create.html#module-pycompwa.data.create" title="pycompwa.data.create"><code class="xref py py-mod docutils literal notranslate"><span class="pre">create</span></code></a> module.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycompwa.data</span> <span class="kn">import</span> <span class="n">create</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2021-10-26 17:35:32,224 INFO [default] Logging to file disabled!
2021-10-26 17:35:32,224 [INFO] Log level: INFO
2021-10-26 17:35:32,224 [INFO] Current date and time: Tue Oct 26 17:35:32 2021
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frame</span> <span class="o">=</span> <span class="n">create</span><span class="o">.</span><span class="n">pwa_frame</span><span class="p">(</span>
    <span class="n">particle_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;pi0&quot;</span><span class="p">,</span> <span class="s2">&quot;pi0&quot;</span><span class="p">],</span> <span class="n">number_of_rows</span><span class="o">=</span><span class="mi">3</span>
<span class="p">)</span>
<span class="n">frame</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>Particle</th>
      <th colspan="4" halign="left">gamma</th>
      <th colspan="4" halign="left">pi0-1</th>
      <th colspan="4" halign="left">pi0-2</th>
    </tr>
    <tr>
      <th>Momentum</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Note that his <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> has hierarchical column name (see <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/advanced.html">multi-indexing</a>): the first column layer is the particle name, the second contains the four-momentum labels. In addition, duplicate particle names have been made unique by adding an index. Values are undefined by default, but you can set them later on. Here, we do this manually, but you can use this procedure for importing large data sets in your own Python scripts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frame</span><span class="p">[</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;p_x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.520903</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.285015</span><span class="p">,</span> <span class="mf">0.632325</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;p_y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.885259</span><span class="p">,</span> <span class="mf">0.520381</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.779928</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;p_z&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.655934</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.996574</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.892786</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.21872</span><span class="p">,</span> <span class="mf">1.15982</span><span class="p">,</span> <span class="mf">1.34357</span><span class="p">]</span>

<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;pi0-1&quot;</span><span class="p">,</span> <span class="s2">&quot;p_x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.653672</span><span class="p">,</span> <span class="mf">0.452265</span><span class="p">,</span> <span class="mf">0.113717</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;pi0-1&quot;</span><span class="p">,</span> <span class="s2">&quot;p_y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.813022</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.76188</span><span class="p">,</span> <span class="mf">0.605441</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;pi0-1&quot;</span><span class="p">,</span> <span class="s2">&quot;p_z&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.01763</span><span class="p">,</span> <span class="mf">0.00723327</span><span class="p">,</span> <span class="mf">0.718613</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;pi0-1&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.46359</span><span class="p">,</span> <span class="mf">0.896256</span><span class="p">,</span> <span class="mf">0.956093</span><span class="p">]</span>

<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;pi0-2&quot;</span><span class="p">,</span> <span class="s2">&quot;p_x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.132769</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.16725</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.746043</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;pi0-2&quot;</span><span class="p">,</span> <span class="s2">&quot;p_y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.0722372</span><span class="p">,</span> <span class="mf">0.241499</span><span class="p">,</span> <span class="mf">0.174487</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;pi0-2&quot;</span><span class="p">,</span> <span class="s2">&quot;p_z&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.361697</span><span class="p">,</span> <span class="mf">0.989341</span><span class="p">,</span> <span class="mf">0.174172</span><span class="p">]</span>
<span class="n">frame</span><span class="p">[</span><span class="s2">&quot;pi0-2&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.414596</span><span class="p">,</span> <span class="mf">1.04082</span><span class="p">,</span> <span class="mf">0.797233</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>We can now already have a glance at some of the properties that the <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PwaAccessor</span></code></a> offers. You can access these properties through the <code class="docutils literal notranslate"><span class="pre">pwa</span></code> namespace and perform some standard <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/index.html#module-pandas" title="(in pandas v1.3.4)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pandas</span></code></a> computation on them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Particles:&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">particles</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Momentum labels:&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">momentum_labels</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Weights:&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">weights</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Average pi0 mass:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="p">[[</span><span class="s2">&quot;pi0-1&quot;</span><span class="p">,</span> <span class="s2">&quot;pi0-2&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">mass</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;Average gamma 3-momentum:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">frame</span><span class="p">[</span><span class="s2">&quot;gamma&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">rho</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
    <span class="s2">&quot;+/-&quot;</span><span class="p">,</span>
    <span class="n">frame</span><span class="p">[</span><span class="s2">&quot;gamma&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">rho</span><span class="o">.</span><span class="n">std</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Particles: [&#39;gamma&#39;, &#39;pi0-1&#39;, &#39;pi0-2&#39;]
Momentum labels: [&#39;p_x&#39;, &#39;p_y&#39;, &#39;p_z&#39;, &#39;E&#39;]
Weights: None
Average pi0 mass:
 0.1349838859840143
Average gamma 3-momentum:
 1.2407047361464343 +/- 0.09382756371243478
</pre></div>
</div>
</div>
</div>
<p>We’ll see more of these properties after we import some real data.</p>
</div>
<div class="section" id="import-and-export-data">
<h2>Import and export data<a class="headerlink" href="#import-and-export-data" title="Permalink to this headline">¶</a></h2>
<p>The module <a class="reference internal" href="../../api/pycompwa.data.io.html#module-pycompwa.data.io" title="pycompwa.data.io"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data.io</span></code></a> allows one to import from and to data formats of other PWA frameworks. Here’s an example, importing a <code class="docutils literal notranslate"><span class="pre">pawianHists.root</span></code> file. Such a file not only contains <a class="reference external" href="https://root.cern.ch/root/htmldoc/guides/users-guide/Histograms.html">ROOT histograms</a> of the kinematic distributions, but also two <a class="reference external" href="https://root.cern.ch/doc/master/classTTree.html">TTrees</a> of four-momentum tuples: one for data and one for fit intensities.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycompwa.data</span> <span class="kn">import</span> <span class="n">io</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frame_data</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">pawian</span><span class="o">.</span><span class="n">read_hists_file</span><span class="p">(</span><span class="s2">&quot;jpsi_f0_gammapipi.root&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
<span class="n">frame_fit</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">pawian</span><span class="o">.</span><span class="n">read_hists_file</span><span class="p">(</span><span class="s2">&quot;jpsi_f0_gammapipi.root&quot;</span><span class="p">,</span> <span class="s2">&quot;fit&quot;</span><span class="p">)</span>
<span class="n">frame_fit</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>Particle</th>
      <th colspan="4" halign="left">gamma</th>
      <th colspan="4" halign="left">pi0_1</th>
      <th colspan="4" halign="left">pi0_2</th>
      <th>weight</th>
    </tr>
    <tr>
      <th>Momentum</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.053254</td>
      <td>-0.102226</td>
      <td>-0.271504</td>
      <td>0.294959</td>
      <td>1.305630</td>
      <td>-0.324557</td>
      <td>0.223228</td>
      <td>1.370420</td>
      <td>-1.358880</td>
      <td>0.426783</td>
      <td>0.048276</td>
      <td>1.43152</td>
      <td>0.003513</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.233270</td>
      <td>0.509333</td>
      <td>0.499320</td>
      <td>0.750437</td>
      <td>-0.684387</td>
      <td>-0.801269</td>
      <td>0.281889</td>
      <td>1.099140</td>
      <td>0.917657</td>
      <td>0.291936</td>
      <td>-0.781209</td>
      <td>1.24733</td>
      <td>0.008061</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.300303</td>
      <td>0.284337</td>
      <td>-0.255063</td>
      <td>0.485887</td>
      <td>-1.020240</td>
      <td>-0.026281</td>
      <td>0.630984</td>
      <td>1.207460</td>
      <td>1.320550</td>
      <td>-0.258056</td>
      <td>-0.375920</td>
      <td>1.40356</td>
      <td>0.003586</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.555215</td>
      <td>0.086553</td>
      <td>0.825067</td>
      <td>0.998244</td>
      <td>-0.757501</td>
      <td>0.411259</td>
      <td>0.234126</td>
      <td>0.903313</td>
      <td>0.202285</td>
      <td>-0.497813</td>
      <td>-1.059190</td>
      <td>1.19534</td>
      <td>0.025217</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.649631</td>
      <td>0.057455</td>
      <td>-0.008806</td>
      <td>0.652226</td>
      <td>-0.923858</td>
      <td>0.799518</td>
      <td>-0.581799</td>
      <td>1.359950</td>
      <td>0.274227</td>
      <td>-0.856973</td>
      <td>0.590605</td>
      <td>1.08473</td>
      <td>0.004200</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1505</th>
      <td>-0.469609</td>
      <td>-0.065891</td>
      <td>-0.356168</td>
      <td>0.593068</td>
      <td>-0.845740</td>
      <td>-0.168722</td>
      <td>-0.402724</td>
      <td>0.961326</td>
      <td>1.315350</td>
      <td>0.234614</td>
      <td>0.758892</td>
      <td>1.54251</td>
      <td>0.004934</td>
    </tr>
    <tr>
      <th>1506</th>
      <td>0.680510</td>
      <td>0.304596</td>
      <td>-0.181785</td>
      <td>0.767410</td>
      <td>-0.805672</td>
      <td>0.780103</td>
      <td>-0.233644</td>
      <td>1.153460</td>
      <td>0.125162</td>
      <td>-1.084700</td>
      <td>0.415429</td>
      <td>1.17603</td>
      <td>0.006227</td>
    </tr>
    <tr>
      <th>1507</th>
      <td>-0.095390</td>
      <td>0.716417</td>
      <td>-1.176800</td>
      <td>1.381018</td>
      <td>0.061994</td>
      <td>0.059014</td>
      <td>-0.119087</td>
      <td>0.199315</td>
      <td>0.033396</td>
      <td>-0.775431</td>
      <td>1.295890</td>
      <td>1.51656</td>
      <td>19.929375</td>
    </tr>
    <tr>
      <th>1508</th>
      <td>-1.161710</td>
      <td>-0.184147</td>
      <td>0.105635</td>
      <td>1.180948</td>
      <td>-0.040109</td>
      <td>-0.486701</td>
      <td>-0.161686</td>
      <td>0.531834</td>
      <td>1.201820</td>
      <td>0.670847</td>
      <td>0.056052</td>
      <td>1.38411</td>
      <td>0.052588</td>
    </tr>
    <tr>
      <th>1509</th>
      <td>-0.062611</td>
      <td>-0.288004</td>
      <td>-0.153473</td>
      <td>0.332296</td>
      <td>0.192284</td>
      <td>-0.350495</td>
      <td>1.339660</td>
      <td>1.404540</td>
      <td>-0.129673</td>
      <td>0.638500</td>
      <td>-1.186190</td>
      <td>1.36006</td>
      <td>0.002482</td>
    </tr>
  </tbody>
</table>
<p>1510 rows × 13 columns</p>
</div></div></div>
</div>
<p>Note how, here too, the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> is formatted in such a way that it can be handled by the <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PwaAccessor</span></code></a>. Also note that the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> for the fit result contains weights. As discussed in <a class="reference internal" href="../workflow/step4.html"><span class="doc">Step 4: Analyze results</span></a>, these are the fit intensities for each data point in the phase space. This allows us to already make some quick visualization of invariant mass distribution of the resonance:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f0_data</span> <span class="o">=</span> <span class="n">frame_data</span><span class="p">[</span><span class="s2">&quot;pi0_1&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">frame_data</span><span class="p">[</span><span class="s2">&quot;pi0_2&quot;</span><span class="p">]</span>
<span class="n">f0_fit</span> <span class="o">=</span> <span class="n">frame_fit</span><span class="p">[</span><span class="s2">&quot;pi0_1&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">frame_fit</span><span class="p">[</span><span class="s2">&quot;pi0_2&quot;</span><span class="p">]</span>

<span class="n">f0_data</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">mass</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">f0_fit</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">mass</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;fit&quot;</span><span class="p">,</span>
    <span class="n">bins</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
    <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">histtype</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
    <span class="n">weights</span><span class="o">=</span><span class="n">frame_fit</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">intensities</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;$M(\pi^0,\pi^0)$ [GeV]&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;f0 resonance&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/data_module_18_0.png" src="../../_images/data_module_18_0.png" />
</div>
</div>
<p>You can also easily export the data again after you’ve made some adjustments, like selecting certain events. Just to illustrate the benefits of <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/index.html#module-pandas" title="(in pandas v1.3.4)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pandas</span></code></a>, we apply some filter on one of the <span class="math notranslate nohighlight">\(\pi^0\)</span> mass, export the frame to an ASCII file and import it again:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">selection</span> <span class="o">=</span> <span class="n">frame_data</span><span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">f0_data</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">mass</span> <span class="o">-</span> <span class="mf">0.990</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">]</span>
<span class="n">io</span><span class="o">.</span><span class="n">pawian</span><span class="o">.</span><span class="n">write_ascii</span><span class="p">(</span><span class="n">selection</span><span class="p">,</span> <span class="s2">&quot;filtered_data.dat&quot;</span><span class="p">)</span>
<span class="n">io</span><span class="o">.</span><span class="n">pawian</span><span class="o">.</span><span class="n">read_ascii</span><span class="p">(</span><span class="s2">&quot;filtered_data.dat&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;pi0&quot;</span><span class="p">,</span> <span class="s2">&quot;pi0&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th>Particle</th>
      <th colspan="4" halign="left">gamma</th>
      <th colspan="4" halign="left">pi0-1</th>
      <th colspan="4" halign="left">pi0-2</th>
    </tr>
    <tr>
      <th>Momentum</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
      <th>p_x</th>
      <th>p_y</th>
      <th>p_z</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.182506</td>
      <td>-0.844948</td>
      <td>1.076130</td>
      <td>1.380327</td>
      <td>0.141731</td>
      <td>0.873233</td>
      <td>-1.220080</td>
      <td>1.513090</td>
      <td>0.040775</td>
      <td>-0.028285</td>
      <td>0.143952</td>
      <td>0.203479</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.559665</td>
      <td>-0.873999</td>
      <td>-0.921926</td>
      <td>1.388181</td>
      <td>0.030816</td>
      <td>0.642806</td>
      <td>0.822141</td>
      <td>1.052750</td>
      <td>-0.590482</td>
      <td>0.231193</td>
      <td>0.099785</td>
      <td>0.655968</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-1.030480</td>
      <td>0.892277</td>
      <td>0.264144</td>
      <td>1.388459</td>
      <td>0.681217</td>
      <td>-1.064850</td>
      <td>-0.251640</td>
      <td>1.295960</td>
      <td>0.349266</td>
      <td>0.172571</td>
      <td>-0.012504</td>
      <td>0.412483</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.116316</td>
      <td>1.265080</td>
      <td>-0.564446</td>
      <td>1.390164</td>
      <td>0.132802</td>
      <td>0.100997</td>
      <td>0.095432</td>
      <td>0.234868</td>
      <td>-0.249118</td>
      <td>-1.366070</td>
      <td>0.469014</td>
      <td>1.471870</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-1.072190</td>
      <td>-0.141766</td>
      <td>0.861404</td>
      <td>1.382645</td>
      <td>1.230490</td>
      <td>0.096587</td>
      <td>-0.605567</td>
      <td>1.381430</td>
      <td>-0.158292</td>
      <td>0.045179</td>
      <td>-0.255837</td>
      <td>0.332819</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>89</th>
      <td>1.285130</td>
      <td>0.549771</td>
      <td>0.048662</td>
      <td>1.398633</td>
      <td>-0.325851</td>
      <td>-0.492884</td>
      <td>0.288127</td>
      <td>0.671081</td>
      <td>-0.959282</td>
      <td>-0.056887</td>
      <td>-0.336789</td>
      <td>1.027180</td>
    </tr>
    <tr>
      <th>90</th>
      <td>0.351707</td>
      <td>0.223883</td>
      <td>-1.309260</td>
      <td>1.374039</td>
      <td>-0.370255</td>
      <td>0.172147</td>
      <td>1.221450</td>
      <td>1.294940</td>
      <td>0.018548</td>
      <td>-0.396030</td>
      <td>0.087812</td>
      <td>0.427918</td>
    </tr>
    <tr>
      <th>91</th>
      <td>1.303890</td>
      <td>0.441621</td>
      <td>-0.203768</td>
      <td>1.391646</td>
      <td>-1.148060</td>
      <td>-0.246995</td>
      <td>0.510475</td>
      <td>1.287580</td>
      <td>-0.155831</td>
      <td>-0.194626</td>
      <td>-0.306707</td>
      <td>0.417672</td>
    </tr>
    <tr>
      <th>92</th>
      <td>-0.524492</td>
      <td>-0.265778</td>
      <td>1.252710</td>
      <td>1.383840</td>
      <td>0.215780</td>
      <td>-0.239497</td>
      <td>-0.992715</td>
      <td>1.052440</td>
      <td>0.308712</td>
      <td>0.505275</td>
      <td>-0.259997</td>
      <td>0.660624</td>
    </tr>
    <tr>
      <th>93</th>
      <td>0.545379</td>
      <td>1.241510</td>
      <td>0.242481</td>
      <td>1.377528</td>
      <td>0.198947</td>
      <td>-0.082614</td>
      <td>-0.218520</td>
      <td>0.335223</td>
      <td>-0.744326</td>
      <td>-1.158900</td>
      <td>-0.023961</td>
      <td>1.384150</td>
    </tr>
  </tbody>
</table>
<p>94 rows × 12 columns</p>
</div></div></div>
</div>
</div>
<div class="section" id="conversion-to-kinematic-variables">
<h2>Conversion to kinematic variables<a class="headerlink" href="#conversion-to-kinematic-variables" title="Permalink to this headline">¶</a></h2>
<p>Having a <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWA</span> <span class="pre">DataFrame</span></code></a>, we can use ComPWA to convert the momentum tuples to kinematic variables. For that, of course, we first need to <a class="reference internal" href="../workflow/step1.html"><span class="doc">create a model file</span></a> for the kinematics. As can be seen from the column names of the <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWA</span> <span class="pre">DataFrame</span></code></a> that we imported from the <code class="docutils literal notranslate"><span class="pre">pawianHists.root</span></code> file, we have momentum tuples for a <span class="math notranslate nohighlight">\(J/\psi \to \gamma\pi^0\pi^0\)</span> decay and we saw that there is only one resonance (<span class="math notranslate nohighlight">\(f_0(980)\)</span>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">import</span> <span class="nn">pycompwa.ui</span> <span class="k">as</span> <span class="nn">pwa</span>

<span class="c1"># not interested in warnings now</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
<span class="n">pwa</span><span class="o">.</span><span class="n">Logging</span><span class="p">(</span><span class="s2">&quot;ERROR&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2021-10-26 17:35:33,484 [INFO] Logging to file disabled!
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycompwa.expertsystem.ui.system_control</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">InteractionTypes</span><span class="p">,</span>
    <span class="n">StateTransitionManager</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">initial_state</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;J/psi&quot;</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])]</span>
<span class="n">final_state</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;gamma&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;pi0&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;pi0&quot;</span><span class="p">)]</span>
<span class="n">tbd_manager</span> <span class="o">=</span> <span class="n">StateTransitionManager</span><span class="p">(</span>
    <span class="n">initial_state</span><span class="p">,</span>
    <span class="n">final_state</span><span class="p">,</span>
    <span class="n">formalism_type</span><span class="o">=</span><span class="s2">&quot;helicity&quot;</span><span class="p">,</span>
    <span class="n">topology_building</span><span class="o">=</span><span class="s2">&quot;isobar&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">tbd_manager</span><span class="o">.</span><span class="n">set_allowed_interaction_types</span><span class="p">([</span><span class="n">InteractionTypes</span><span class="o">.</span><span class="n">EM</span><span class="p">])</span>
<span class="n">tbd_manager</span><span class="o">.</span><span class="n">allowed_intermediate_particles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;f0(980)&quot;</span><span class="p">]</span>

<span class="n">graph_interaction_settings_groups</span> <span class="o">=</span> <span class="n">tbd_manager</span><span class="o">.</span><span class="n">prepare_graphs</span><span class="p">()</span>
<span class="n">solutions</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">tbd_manager</span><span class="o">.</span><span class="n">find_solutions</span><span class="p">(</span><span class="n">graph_interaction_settings_groups</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">pycompwa.expertsystem.amplitude.helicitydecay</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">HelicityAmplitudeGeneratorXML</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">model_file</span> <span class="o">=</span> <span class="s2">&quot;jpsi_f0_gammapipi.xml&quot;</span>
<span class="n">xml_generator</span> <span class="o">=</span> <span class="n">HelicityAmplitudeGeneratorXML</span><span class="p">()</span>
<span class="n">xml_generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">solutions</span><span class="p">)</span>
<span class="n">xml_generator</span><span class="o">.</span><span class="n">write_to_file</span><span class="p">(</span><span class="n">model_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now that we have an XML model file defining the kinematics and a <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWA</span> <span class="pre">DataFrame</span></code></a>, we can use the convert module to convert the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> to an <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.EventCollection" title="pycompwa.ui.EventCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">EventCollection</span></code></a>. Note, however, that we will run into an exception:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycompwa.data</span> <span class="kn">import</span> <span class="n">convert</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">convert</span><span class="o">.</span><span class="n">pandas_to_events</span><span class="p">(</span><span class="n">frame_data</span><span class="p">,</span> <span class="n">model_file</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXCEPTION:&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>EXCEPTION: 
  You first have to convert the columns names:
    [&#39;gamma&#39;, &#39;pi0_1&#39;, &#39;pi0_2&#39;]
  to the final state IDs:
    [2, 3, 4]
  as defined in XML file
    &quot;jpsi_f0_gammapipi.xml&quot;
  with e.g. naming.particle_to_id or pandas.DataFrame.rename
</pre></div>
</div>
</div>
</div>
<p>What’s going on here? The kinematics file works with final state IDs, so it doesn’t understand the particle names here. Now, we could try to follow the first suggestion here, but this won’t work:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycompwa.data</span> <span class="kn">import</span> <span class="n">naming</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">naming</span><span class="o">.</span><span class="n">particle_to_id</span><span class="p">(</span><span class="n">frame_data</span><span class="p">,</span> <span class="n">model_file</span><span class="p">)</span>
<span class="n">frame_data</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">particles</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2, &#39;pi0_1&#39;, &#39;pi0_2&#39;]
</pre></div>
</div>
</div>
</div>
<p>As you can see, the <span class="math notranslate nohighlight">\(\gamma\)</span> has been nicely renamed to its final state ID, but the renaming failed for the pions (it would have worked if the separator used for the added index for duplicate particles were a <code class="docutils literal notranslate"><span class="pre">-</span></code>). If we follow the second suggestion, it will work:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;gamma&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;pi0_1&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;pi0_2&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">frame_data</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">frame_fit</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">mapping</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">events_data</span> <span class="o">=</span> <span class="n">convert</span><span class="o">.</span><span class="n">pandas_to_events</span><span class="p">(</span><span class="n">frame_data</span><span class="p">,</span> <span class="n">model_file</span><span class="p">)</span>
<span class="n">events_fit</span> <span class="o">=</span> <span class="n">convert</span><span class="o">.</span><span class="n">pandas_to_events</span><span class="p">(</span><span class="n">frame_fit</span><span class="p">,</span> <span class="n">model_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now that you have <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.EventCollection" title="pycompwa.ui.EventCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">EventCollection</span></code></a> instances, you are free to use all ComPWA functionality from <a class="reference internal" href="../workflow/step3.html"><span class="doc">Step 3: Perform fit</span></a> onwards. If, however, you were more interested in the kinematic variables for these imported data sets immediately, you can expand the original <a class="reference internal" href="../../api/pycompwa.data.html#pycompwa.data.PwaAccessor" title="pycompwa.data.PwaAccessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">PWA</span> <span class="pre">DataFrame</span></code></a> with the kinematic variables as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pycompwa.ui</span> <span class="k">as</span> <span class="nn">pwa</span>
<span class="kn">from</span> <span class="nn">pycompwa.data</span> <span class="kn">import</span> <span class="n">append</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">set_data</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">compute_kinematic_variables</span><span class="p">(</span><span class="n">events_data</span><span class="p">,</span> <span class="n">model_file</span><span class="p">)</span>
<span class="n">set_fit</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">compute_kinematic_variables</span><span class="p">(</span><span class="n">events_fit</span><span class="p">,</span> <span class="n">model_file</span><span class="p">)</span>
<span class="n">naming</span><span class="o">.</span><span class="n">id_to_particle</span><span class="p">(</span><span class="n">frame_data</span><span class="p">,</span> <span class="n">model_file</span><span class="p">,</span> <span class="n">make_unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">naming</span><span class="o">.</span><span class="n">id_to_particle</span><span class="p">(</span><span class="n">frame_fit</span><span class="p">,</span> <span class="n">model_file</span><span class="p">,</span> <span class="n">make_unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">append</span><span class="p">(</span><span class="n">frame_data</span><span class="p">,</span> <span class="n">convert</span><span class="o">.</span><span class="n">data_set_to_pandas</span><span class="p">(</span><span class="n">set_data</span><span class="p">))</span>
<span class="n">append</span><span class="p">(</span><span class="n">frame_fit</span><span class="p">,</span> <span class="n">convert</span><span class="o">.</span><span class="n">data_set_to_pandas</span><span class="p">(</span><span class="n">set_fit</span><span class="p">))</span>
<span class="n">frame_data</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">other_columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;phi_2_34&#39;,
 &#39;phi_24_3&#39;,
 &#39;mSq_(2,3)&#39;,
 &#39;phi_2_3_vs_4&#39;,
 &#39;theta_2_34&#39;,
 &#39;mSq_(2,4)&#39;,
 &#39;theta_23_4&#39;,
 &#39;mSq_(3,4)&#39;,
 &#39;theta_24_3&#39;,
 &#39;phi_2_4_vs_3&#39;,
 &#39;phi_3_4_vs_2&#39;,
 &#39;theta_2_3_vs_4&#39;,
 &#39;phi_23_4&#39;,
 &#39;theta_2_4_vs_3&#39;,
 &#39;mSq_(2,3,4)&#39;,
 &#39;theta_3_4_vs_2&#39;]
</pre></div>
</div>
</div>
</div>
<p>Finally, we can plot the distributions of the kinematic variables (as computed by ComPWA) <strong>of the imported data</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="s2">&quot;theta_2_4_vs_3&quot;</span>
<span class="n">frame_data</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">frame_fit</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;fit&quot;</span><span class="p">,</span>
    <span class="n">bins</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
    <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">histtype</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
    <span class="n">weights</span><span class="o">=</span><span class="n">frame_fit</span><span class="o">.</span><span class="n">pwa</span><span class="o">.</span><span class="n">intensities</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">naming</span><span class="o">.</span><span class="n">replace_ids</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">model_file</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/data_module_37_0.png" src="../../_images/data_module_37_0.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "ComPWA/pycompwa",
            ref: "stable",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./usage/tools"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="../tools.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Additional Tools</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="generate.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Generate data samples</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Common Partial Wave Analysis<br/>
        
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>