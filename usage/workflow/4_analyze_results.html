
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Step 4: Analyze results &#8212; pycompwa</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Additional Tools" href="../tools.html" />
    <link rel="prev" title="Step 3: Perform fit" href="3_perform_fit.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo-small.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">pycompwa</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../installation.html">
   Installation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../install/get-the-source-code.html">
     Get the source code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../install/virtual-environment.html">
     Create a virtual environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../install/build.html">
     Build and install
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../usage.html">
   Usage
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../workflow.html">
     ComPWA Workflow
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="1_create_model.html">
       Step 1: Create an amplitude model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="2_generate_data.html">
       Step 2: Generate data samples
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="3_perform_fit.html">
       Step 3: Perform fit
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Step 4: Analyze results
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../tools.html">
     Additional Tools
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../tools/data_module.html">
       Data module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../tools/generate.html">
       Generate data samples
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../tools/particles.html">
       Particle database
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../contribute.html">
   How to contribute
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../documents.html">
   Talks and Documents
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../api/pycompwa.html">
   API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/pycompwa.data.html">
     data
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.data.io.html">
       io
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.data.io.pawian.html">
         pawian
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.data.convert.html">
       convert
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.data.create.html">
       create
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.data.exception.html">
       exception
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.data.naming.html">
       naming
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/pycompwa.expertsystem.html">
     expertsystem
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.amplitude.html">
       amplitude
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
      <label for="toctree-checkbox-9">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.amplitude.abstractgenerator.html">
         abstractgenerator
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.amplitude.canonicaldecay.html">
         canonicaldecay
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.amplitude.helicitydecay.html">
         helicitydecay
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.solvers.html">
       solvers
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.state.html">
       state
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
      <label for="toctree-checkbox-10">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.state.conservationrules.html">
         conservationrules
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.state.particle.html">
         particle
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.state.propagation.html">
         propagation
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.topology.html">
       topology
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
      <label for="toctree-checkbox-11">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.topology.graph.html">
         graph
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.topology.topologybuilder.html">
         topologybuilder
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/pycompwa.expertsystem.ui.html">
       ui
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
      <label for="toctree-checkbox-12">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.ui.default_settings.html">
         default_settings
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/pycompwa.expertsystem.ui.system_control.html">
         system_control
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/pycompwa.plotting.html">
     plotting
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/pycompwa.plotting.rootplotdatareader.html">
       rootplotdatareader
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../api/pycompwa.ui.html">
     ui
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Related projects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://qrules.readthedocs.io">
   QRules
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://ampform.readthedocs.io">
   AmpForm
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://tensorwaves.readthedocs.io">
   TensorWaves
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://pwa.readthedocs.io">
   PWA Pages
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  ComPWA Organization
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://compwa-org.readthedocs.io">
   Website
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/ComPWA">
   GitHub Repositories
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://compwa-org.readthedocs.io/en/stable/about.html">
   About
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/usage/workflow/4_analyze_results.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ComPWA/pycompwa"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ComPWA/pycompwa/issues/new?title=Issue%20on%20page%20%2Fusage/workflow/4_analyze_results.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/ComPWA/pycompwa/edit/stable/docs/usage/workflow/4_analyze_results.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ComPWA/pycompwa/stable?urlpath=lab/tree/docs/usage/workflow/4_analyze_results.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/ComPWA/pycompwa/blob/stable/docs/usage/workflow/4_analyze_results.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#convert-to-pandas">
   4.1 Convert to pandas
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualize">
   4.2 Visualize
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#kinematic-variables">
     Kinematic variables
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dalitz-plots">
     Dalitz plots
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#calculate-fit-fractions">
   4.3 Calculate fit fractions
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <p>Download this notebook <a class="reference download internal" download="" href="../../_downloads/31cbfe48dd4e218d6d7e9f577e89d1b5/4_analyze_results.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
<div class="section" id="step-4-analyze-results">
<h1>Step 4: Analyze results<a class="headerlink" href="#step-4-analyze-results" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="../../index.html"><span class="doc">pycompwa</span></a> is no longer maintained. Use the <a class="reference external" href="https://compwa-org.rtfd.io">ComPWA</a> packages <a class="reference external" href="https://qrules.rtfd.io">QRules</a>, <a class="reference external" href="https://ampform.rtfd.io">AmpForm</a>, and <a class="reference external" href="https://tensorwaves.rtfd.io">TensorWaves</a> instead!</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We load the output from the previous steps first. Note that you need to define an estimator before loading the fit result to the intensity.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pycompwa.ui</span> <span class="k">as</span> <span class="nn">pwa</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2021-10-23 20:17:05,748 INFO [default] Logging to file disabled!
2021-10-23 20:17:05,748 [INFO] Log level: INFO
2021-10-23 20:17:05,748 [INFO] Current date and time: Sat Oct 23 20:17:05 2021
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pwa</span><span class="o">.</span><span class="n">Logging</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>  <span class="c1"># at this stage, we are not interested in the back-end</span>
<span class="n">particle_list</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">read_particles</span><span class="p">(</span><span class="s2">&quot;model.xml&quot;</span><span class="p">)</span>
<span class="n">kinematics</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">create_helicity_kinematics</span><span class="p">(</span><span class="s2">&quot;model.xml&quot;</span><span class="p">,</span> <span class="n">particle_list</span><span class="p">)</span>
<span class="n">kinematics</span><span class="o">.</span><span class="n">create_all_subsystems</span><span class="p">()</span>
<span class="n">data_sample</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">read_root_data</span><span class="p">(</span><span class="n">input_file</span><span class="o">=</span><span class="s2">&quot;generated_data.root&quot;</span><span class="p">)</span>
<span class="n">phsp_sample</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">read_root_data</span><span class="p">(</span><span class="n">input_file</span><span class="o">=</span><span class="s2">&quot;generated_phsp.root&quot;</span><span class="p">)</span>
<span class="n">intensity_builder</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">IntensityBuilderXML</span><span class="p">(</span>
    <span class="s2">&quot;model.xml&quot;</span><span class="p">,</span> <span class="n">particle_list</span><span class="p">,</span> <span class="n">kinematics</span><span class="p">,</span> <span class="n">phsp_sample</span>
<span class="p">)</span>
<span class="n">fit_result</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;fit_result.xml&quot;</span><span class="p">)</span>
<span class="n">intensity</span> <span class="o">=</span> <span class="n">intensity_builder</span><span class="o">.</span><span class="n">create_intensity</span><span class="p">()</span>
<span class="n">data_set</span> <span class="o">=</span> <span class="n">kinematics</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">data_sample</span><span class="p">)</span>
<span class="n">phsp_set</span> <span class="o">=</span> <span class="n">kinematics</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">phsp_sample</span><span class="p">)</span>
<span class="p">(</span>
    <span class="n">estimator</span><span class="p">,</span>
    <span class="n">initial_parameters</span><span class="p">,</span>
<span class="p">)</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">create_unbinned_log_likelihood_function_tree_estimator</span><span class="p">(</span>
    <span class="n">intensity</span><span class="p">,</span> <span class="n">data_set</span>
<span class="p">)</span>
<span class="n">intensity</span><span class="o">.</span><span class="n">updateParametersFrom</span><span class="p">(</span><span class="n">fit_result</span><span class="o">.</span><span class="n">final_parameters</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2021-10-23 20:17:06,101 [INFO] Logging to file disabled!
</pre></div>
</div>
</div>
</div>
<div class="section" id="convert-to-pandas">
<h2>4.1 Convert to pandas<a class="headerlink" href="#convert-to-pandas" title="Permalink to this headline">¶</a></h2>
<p>It is easiest to analyze your data with <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>. We are mostly interested in the distributions of the kinematic variables, so we first have to convert the <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.DataSet" title="pycompwa.ui.DataSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataSet</span></code></a> instances to a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>. We can do this with the <a class="reference internal" href="../../api/pycompwa.data.convert.html#module-pycompwa.data.convert" title="pycompwa.data.convert"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data.convert</span></code></a> module:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycompwa.data</span> <span class="kn">import</span> <span class="n">convert</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frame_data</span> <span class="o">=</span> <span class="n">convert</span><span class="o">.</span><span class="n">data_set_to_pandas</span><span class="p">(</span><span class="n">data_set</span><span class="p">)</span>
<span class="n">frame_phsp</span> <span class="o">=</span> <span class="n">convert</span><span class="o">.</span><span class="n">data_set_to_pandas</span><span class="p">(</span><span class="n">phsp_set</span><span class="p">)</span>
<span class="n">frame_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>phi_2_34</th>
      <th>phi_24_3</th>
      <th>mSq_(2,3)</th>
      <th>phi_2_3_vs_4</th>
      <th>theta_2_34</th>
      <th>mSq_(2,4)</th>
      <th>theta_23_4</th>
      <th>mSq_(3,4)</th>
      <th>theta_34_2</th>
      <th>mSq_(2,3,4)</th>
      <th>theta_3_4_vs_2</th>
      <th>phi_34_2</th>
      <th>phi_23_4</th>
      <th>theta_2_3_vs_4</th>
      <th>theta_24_3</th>
      <th>phi_2_4_vs_3</th>
      <th>phi_3_4_vs_2</th>
      <th>theta_2_4_vs_3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.102657</td>
      <td>2.247974</td>
      <td>7.041085</td>
      <td>1.782934</td>
      <td>1.002477</td>
      <td>0.543847</td>
      <td>2.745762</td>
      <td>2.042295</td>
      <td>2.139116</td>
      <td>9.59079</td>
      <td>0.502226</td>
      <td>-1.038936</td>
      <td>0.498287</td>
      <td>2.224991</td>
      <td>0.797810</td>
      <td>-0.554556</td>
      <td>0.463670</td>
      <td>0.915063</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2.071876</td>
      <td>2.106510</td>
      <td>3.162373</td>
      <td>0.072829</td>
      <td>2.604591</td>
      <td>4.057776</td>
      <td>2.852961</td>
      <td>2.407078</td>
      <td>0.537001</td>
      <td>9.59079</td>
      <td>1.697711</td>
      <td>-1.069717</td>
      <td>-0.965088</td>
      <td>1.299054</td>
      <td>1.578960</td>
      <td>-0.020714</td>
      <td>0.040498</td>
      <td>1.424155</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.889536</td>
      <td>-1.756459</td>
      <td>4.671107</td>
      <td>-0.724954</td>
      <td>2.297602</td>
      <td>3.687157</td>
      <td>1.794325</td>
      <td>1.268963</td>
      <td>0.843991</td>
      <td>9.59079</td>
      <td>1.448707</td>
      <td>2.252057</td>
      <td>-0.229754</td>
      <td>1.039627</td>
      <td>2.432907</td>
      <td>1.456694</td>
      <td>-2.095938</td>
      <td>0.938116</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2.007197</td>
      <td>-3.122791</td>
      <td>2.253370</td>
      <td>1.288726</td>
      <td>1.385250</td>
      <td>3.558244</td>
      <td>0.925994</td>
      <td>3.815613</td>
      <td>1.756343</td>
      <td>9.59079</td>
      <td>1.800957</td>
      <td>-1.134396</td>
      <td>1.112438</td>
      <td>1.595627</td>
      <td>2.159360</td>
      <td>-1.965977</td>
      <td>2.245262</td>
      <td>1.827414</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-2.553175</td>
      <td>-3.092292</td>
      <td>1.277894</td>
      <td>-0.255728</td>
      <td>1.157882</td>
      <td>5.765827</td>
      <td>0.701375</td>
      <td>2.583506</td>
      <td>1.983710</td>
      <td>9.59079</td>
      <td>2.277980</td>
      <td>0.588417</td>
      <td>-2.428574</td>
      <td>1.152534</td>
      <td>2.789166</td>
      <td>2.649058</td>
      <td>-2.962439</td>
      <td>1.918852</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>9995</th>
      <td>-0.222349</td>
      <td>0.534366</td>
      <td>3.694790</td>
      <td>0.860415</td>
      <td>2.257719</td>
      <td>1.919805</td>
      <td>1.999034</td>
      <td>4.012632</td>
      <td>0.883873</td>
      <td>9.59079</td>
      <td>1.243871</td>
      <td>2.919244</td>
      <td>-2.017723</td>
      <td>1.929566</td>
      <td>1.716018</td>
      <td>-0.771193</td>
      <td>1.101634</td>
      <td>1.600783</td>
    </tr>
    <tr>
      <th>9996</th>
      <td>-1.343847</td>
      <td>-1.411040</td>
      <td>6.871474</td>
      <td>-0.685393</td>
      <td>0.886257</td>
      <td>0.165163</td>
      <td>2.657135</td>
      <td>2.590590</td>
      <td>2.255336</td>
      <td>9.59079</td>
      <td>0.238120</td>
      <td>1.797745</td>
      <td>1.425939</td>
      <td>2.746994</td>
      <td>0.773063</td>
      <td>0.435808</td>
      <td>-0.390363</td>
      <td>0.879317</td>
    </tr>
    <tr>
      <th>9997</th>
      <td>-1.598526</td>
      <td>-0.592358</td>
      <td>2.555019</td>
      <td>1.917279</td>
      <td>0.627246</td>
      <td>6.196502</td>
      <td>0.665568</td>
      <td>0.875706</td>
      <td>2.514347</td>
      <td>9.59079</td>
      <td>2.022378</td>
      <td>1.543067</td>
      <td>-2.206541</td>
      <td>0.684207</td>
      <td>1.084305</td>
      <td>-2.424707</td>
      <td>1.715182</td>
      <td>1.026751</td>
    </tr>
    <tr>
      <th>9998</th>
      <td>-2.735183</td>
      <td>0.200863</td>
      <td>0.232193</td>
      <td>0.320457</td>
      <td>1.459895</td>
      <td>5.701769</td>
      <td>1.247911</td>
      <td>3.693265</td>
      <td>1.681698</td>
      <td>9.59079</td>
      <td>2.783947</td>
      <td>0.406410</td>
      <td>-2.805244</td>
      <td>1.244396</td>
      <td>2.221093</td>
      <td>-0.384746</td>
      <td>2.836304</td>
      <td>2.694432</td>
    </tr>
    <tr>
      <th>9999</th>
      <td>-2.831066</td>
      <td>2.733274</td>
      <td>4.462864</td>
      <td>-1.123583</td>
      <td>2.271190</td>
      <td>4.105117</td>
      <td>2.130626</td>
      <td>1.059246</td>
      <td>0.870403</td>
      <td>9.59079</td>
      <td>1.527329</td>
      <td>0.310527</td>
      <td>-2.036393</td>
      <td>0.914699</td>
      <td>2.111935</td>
      <td>1.100360</td>
      <td>-1.532029</td>
      <td>0.881110</td>
    </tr>
  </tbody>
</table>
<p>10000 rows × 18 columns</p>
</div></div></div>
</div>
<p>We converted the phase space sample as well, because it serves as a uniform space over which to evaluate the intensity model. We therefore attribute an intensity as a weight to each entry in the phase space <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">intensity_set</span> <span class="o">=</span> <span class="n">intensity</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">phsp_set</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="n">frame_phsp</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">intensity_set</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The <a class="reference internal" href="../../api/pycompwa.data.html#module-pycompwa.data" title="pycompwa.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycompwa.data</span></code></a> contains several tools for converting from and to <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>. There is also a <a class="reference internal" href="../../api/pycompwa.data.io.html#module-pycompwa.data.io" title="pycompwa.data.io"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data.io</span></code></a> submodule, which allows you to import form and export to file formats of other PWA frameworks. A demonstration of this module can be found under <a class="reference internal" href="../tools/data_module.html"><span class="doc">Data module</span></a>.</p>
</div>
</div>
<div class="section" id="visualize">
<h2>4.2 Visualize<a class="headerlink" href="#visualize" title="Permalink to this headline">¶</a></h2>
<p>Now that we converted our data to <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>, we can use its full potential! In this section, we will use some of that <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> functionality to create histograms of the distributions of the kinematic variables and will have a look at the Dalitz plots both data and fit result.</p>
<div class="section" id="kinematic-variables">
<h3>Kinematic variables<a class="headerlink" href="#kinematic-variables" title="Permalink to this headline">¶</a></h3>
<p>Currently, the columns of the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> created above contain final state IDs. Of course, you would rather see particle names there, but we need to use unique IDs in case there are identical particle names. The <a class="reference internal" href="../../api/pycompwa.data.naming.html#module-pycompwa.data.naming" title="pycompwa.data.naming"><code class="xref py py-mod docutils literal notranslate"><span class="pre">data.naming</span></code></a> module provides a tool that can convert the final state IDs to recognizable names:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycompwa.data</span> <span class="kn">import</span> <span class="n">naming</span>

<span class="n">naming</span><span class="o">.</span><span class="n">replace_ids</span><span class="p">(</span><span class="s2">&quot;2,3&quot;</span><span class="p">,</span> <span class="s2">&quot;model.xml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;gamma,pi0&#39;
</pre></div>
</div>
</div>
</div>
<p>Now you can apply the usual <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" title="(in Matplotlib v3.4.3)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code></a> tools to plot the distributions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_1d_comparison</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Helper function for comparing the 1D distributions of fit and data.&quot;&quot;&quot;</span>
    <span class="n">frame_data</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
        <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="n">frame_phsp</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
        <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span>
        <span class="n">weights</span><span class="o">=</span><span class="n">frame_phsp</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">],</span>
        <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">histtype</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;fit&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;normalized intensity&quot;</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">naming</span><span class="o">.</span><span class="n">replace_ids</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">kinematics</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_1d_comparison</span><span class="p">(</span><span class="s2">&quot;theta_2_4_vs_3&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/4_analyze_results_21_0.png" src="../../_images/4_analyze_results_21_0.png" />
</div>
</div>
<p>Applying a transformation to one of the columns is also easily done for a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.3.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>. For instance, if you are interested in the invariant mass (and not the <strong>square value</strong> of the invariant mass), simply use <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.sqrt.html#numpy.sqrt" title="(in NumPy v1.21)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.sqrt()</span></code></a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="n">frame_data</span><span class="p">[</span><span class="s2">&quot;M(3,4)&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">frame_data</span><span class="p">[</span><span class="s2">&quot;mSq_(3,4)&quot;</span><span class="p">])</span>
<span class="n">frame_phsp</span><span class="p">[</span><span class="s2">&quot;M(3,4)&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">frame_phsp</span><span class="p">[</span><span class="s2">&quot;mSq_(3,4)&quot;</span><span class="p">])</span>

<span class="n">plot_1d_comparison</span><span class="p">(</span><span class="s2">&quot;M(3,4)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/4_analyze_results_23_0.png" src="../../_images/4_analyze_results_23_0.png" />
</div>
</div>
</div>
<div class="section" id="dalitz-plots">
<h3>Dalitz plots<a class="headerlink" href="#dalitz-plots" title="Permalink to this headline">¶</a></h3>
<p>Dalitz plots are 2-dimensional histograms of the square values of the invariant masses. We are therefore interested in the following variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">variable_names</span> <span class="o">=</span> <span class="n">data_set</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">[</span><span class="n">var</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variable_names</span> <span class="k">if</span> <span class="n">var</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;mSq_&quot;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;mSq_(2,3)&#39;, &#39;mSq_(2,4)&#39;, &#39;mSq_(3,4)&#39;, &#39;mSq_(2,3,4)&#39;]
</pre></div>
</div>
</div>
</div>
<p>We now use <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.hist2d.html#matplotlib.pyplot.hist2d" title="(in Matplotlib v3.4.3)"><code class="xref py py-func docutils literal notranslate"><span class="pre">hist2d()</span></code></a> to generate the Dalitz plots:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">dalitz_plot</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">mass_x</span><span class="p">,</span> <span class="n">mass_y</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Helper function to create a Dalitz plot with useful axis titles.&quot;&quot;&quot;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">hist2d</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="n">mass_x</span><span class="p">],</span> <span class="n">frame</span><span class="p">[</span><span class="n">mass_y</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">naming</span><span class="o">.</span><span class="n">replace_ids</span><span class="p">(</span><span class="n">mass_x</span><span class="p">,</span> <span class="n">kinematics</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">naming</span><span class="o">.</span><span class="n">replace_ids</span><span class="p">(</span><span class="n">mass_y</span><span class="p">,</span> <span class="n">kinematics</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">LogNorm</span>  <span class="c1"># logarithmic z-axis</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span>
<span class="n">dalitz_plot</span><span class="p">(</span><span class="n">frame_data</span><span class="p">,</span> <span class="s2">&quot;mSq_(3,4)&quot;</span><span class="p">,</span> <span class="s2">&quot;mSq_(2,4)&quot;</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">LogNorm</span><span class="p">())</span>

<span class="n">plt</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;fit&quot;</span><span class="p">)</span>
<span class="n">dalitz_plot</span><span class="p">(</span>
    <span class="n">frame_phsp</span><span class="p">,</span>
    <span class="s2">&quot;mSq_(3,4)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mSq_(2,4)&quot;</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">LogNorm</span><span class="p">(),</span>
    <span class="n">weights</span><span class="o">=</span><span class="n">frame_phsp</span><span class="p">[</span><span class="s2">&quot;weights&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/4_analyze_results_29_0.png" src="../../_images/4_analyze_results_29_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="calculate-fit-fractions">
<h2>4.3 Calculate fit fractions<a class="headerlink" href="#calculate-fit-fractions" title="Permalink to this headline">¶</a></h2>
<p>The original intensity model that we optimized consists of several components. All registered component names can be retrieved via <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.IntensityBuilderXML.get_all_component_names" title="pycompwa.ui.IntensityBuilderXML.get_all_component_names"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all_component_names()</span></code></a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">intensity_builder</span><span class="o">.</span><span class="n">get_all_component_names</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;J/psi_-1_to_f0(1500)_0+gamma_-1;f0(1500)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f0(1500)_0+gamma_1;f0(1500)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f0(980)_0+gamma_-1;f0(980)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f0(980)_0+gamma_1;f0(980)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1270)_-1+gamma_-1;f2(1270)_-1_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1270)_-2+gamma_-1;f2(1270)_-2_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1270)_0+gamma_-1;f2(1270)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1270)_0+gamma_1;f2(1270)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1270)_1+gamma_1;f2(1270)_1_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1270)_2+gamma_1;f2(1270)_2_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1950)_-1+gamma_-1;f2(1950)_-1_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1950)_-2+gamma_-1;f2(1950)_-2_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1950)_0+gamma_-1;f2(1950)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1950)_0+gamma_1;f2(1950)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1950)_1+gamma_1;f2(1950)_1_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_-1_to_f2(1950)_2+gamma_1;f2(1950)_2_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f0(1500)_0+gamma_-1;f0(1500)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f0(1500)_0+gamma_1;f0(1500)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f0(980)_0+gamma_-1;f0(980)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f0(980)_0+gamma_1;f0(980)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1270)_-1+gamma_-1;f2(1270)_-1_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1270)_-2+gamma_-1;f2(1270)_-2_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1270)_0+gamma_-1;f2(1270)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1270)_0+gamma_1;f2(1270)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1270)_1+gamma_1;f2(1270)_1_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1270)_2+gamma_1;f2(1270)_2_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1950)_-1+gamma_-1;f2(1950)_-1_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1950)_-2+gamma_-1;f2(1950)_-2_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1950)_0+gamma_-1;f2(1950)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1950)_0+gamma_1;f2(1950)_0_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1950)_1+gamma_1;f2(1950)_1_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;J/psi_1_to_f2(1950)_2+gamma_1;f2(1950)_2_to_pi0_0+pi0_0;&#39;: &#39;Amplitude&#39;,
 &#39;coherent_J/psi_-1_to_gamma_-1+pi0_0+pi0_0&#39;: &#39;Intensity&#39;,
 &#39;coherent_J/psi_-1_to_gamma_1+pi0_0+pi0_0&#39;: &#39;Intensity&#39;,
 &#39;coherent_J/psi_1_to_gamma_-1+pi0_0+pi0_0&#39;: &#39;Intensity&#39;,
 &#39;coherent_J/psi_1_to_gamma_1+pi0_0+pi0_0&#39;: &#39;Intensity&#39;,
 &#39;incoherent_with_strength&#39;: &#39;Intensity&#39;}
</pre></div>
</div>
</div>
</div>
<p>As you can see, these components are amplitudes and intensities that are added coherently or incoherently.</p>
<p>In PWA, you are often interested in the fractions that those amplitudes contribute to the total intensity. These <strong>fit fractions</strong> can be calculated using the <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.fit_fractions_with_propagated_errors" title="pycompwa.ui.fit_fractions_with_propagated_errors"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit_fractions_with_propagated_errors()</span></code></a> function. It requires amplitude or <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.Intensity" title="pycompwa.ui.Intensity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Intensity</span></code></a> components that can be extracted from the <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.IntensityBuilderXML" title="pycompwa.ui.IntensityBuilderXML"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntensityBuilderXML</span></code></a> instance. A nested list of the component names has to be specified as well. These are the names specified in the component XML attributes. If the inner lists contain more than one component, these components will be added coherently. In this way, you can calculate your own customized fit fractions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">components</span> <span class="o">=</span> <span class="n">intensity_builder</span><span class="o">.</span><span class="n">create_intensity_components</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;coherent_J/psi_-1_to_gamma_-1+pi0_0+pi0_0&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;J/psi_-1_to_f2(1270)_-1+gamma_-1;f2(1270)_-1_to_pi0_0+pi0_0;&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;J/psi_-1_to_f2(1270)_-2+gamma_-1;f2(1270)_-2_to_pi0_0+pi0_0;&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;J/psi_-1_to_f2(1270)_0+gamma_-1;f2(1270)_0_to_pi0_0+pi0_0;&quot;</span><span class="p">],</span>
        <span class="p">[</span>
            <span class="s2">&quot;J/psi_-1_to_f2(1270)_-1+gamma_-1;f2(1270)_-1_to_pi0_0+pi0_0;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;J/psi_-1_to_f2(1270)_-2+gamma_-1;f2(1270)_-2_to_pi0_0+pi0_0;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;J/psi_-1_to_f2(1270)_0+gamma_-1;f2(1270)_0_to_pi0_0+pi0_0;&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The last step is to call the actual fit fraction calculation function <a class="reference internal" href="../../api/pycompwa.ui.html#pycompwa.ui.fit_fractions_with_propagated_errors" title="pycompwa.ui.fit_fractions_with_propagated_errors"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit_fractions_with_propagated_errors()</span></code></a>. Here, the first required argument is a list of component pairs. Each pair resembles the nominator and denominator of a fit fraction.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fit_fractions</span> <span class="o">=</span> <span class="n">pwa</span><span class="o">.</span><span class="n">fit_fractions_with_propagated_errors</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="n">components</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="p">(</span><span class="n">components</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="p">(</span><span class="n">components</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="p">(</span><span class="n">components</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
    <span class="p">],</span>
    <span class="n">phsp_set</span><span class="p">,</span>
    <span class="n">fit_result</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fraction</span> <span class="ow">in</span> <span class="n">fit_fractions</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fraction</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fraction</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;+/-&quot;</span><span class="p">,</span> <span class="n">fraction</span><span class="o">.</span><span class="n">error</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>J/psi_-1_to_f2(1270)_-1+gamma_-1
  f2(1270)_-1_to_pi0_0+pi0_0
  /coherent_J/psi_-1_to_gamma_-1+pi0_0+pi0_0
0.005501850829265467 +/- 0.002218392040543499

J/psi_-1_to_f2(1270)_-2+gamma_-1
  f2(1270)_-2_to_pi0_0+pi0_0
  /coherent_J/psi_-1_to_gamma_-1+pi0_0+pi0_0
0.012420672413564506 +/- 0.002653439377578946

J/psi_-1_to_f2(1270)_0+gamma_-1
  f2(1270)_0_to_pi0_0+pi0_0
  /coherent_J/psi_-1_to_gamma_-1+pi0_0+pi0_0
0.010391539895566813 +/- 0.0021907169946113916

J/psi_-1_to_f2(1270)_-1+gamma_-1
  f2(1270)_-1_to_pi0_0+pi0_0
  _J/psi_-1_to_f2(1270)_-2+gamma_-1
  f2(1270)_-2_to_pi0_0+pi0_0
  _J/psi_-1_to_f2(1270)_0+gamma_-1
  f2(1270)_0_to_pi0_0+pi0_0
  /coherent_J/psi_-1_to_gamma_-1+pi0_0+pi0_0
0.02824129233273513 +/- 0.002995934047430585
</pre></div>
</div>
</div>
</div>
<p>That’s it! You can check some of the other <a class="reference internal" href="../../usage.html"><span class="doc">examples</span></a> to learn about more detailed features of ComPWA.</p>
<p>And, please, feel free to <a class="reference external" href="https://github.com/ComPWA/pycompwa/issues/new">provide feedback</a> or <a class="reference external" href="https://compwa.github.io/contribute.html">contribute</a> ;)</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "ComPWA/pycompwa",
            ref: "stable",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./usage/workflow"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="3_perform_fit.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Step 3: Perform fit</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="../tools.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Additional Tools</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Common Partial Wave Analysis<br/>
        
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>