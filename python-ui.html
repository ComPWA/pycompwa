

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python UI &mdash; pycompwa  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pycompwa
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="documents.html">Talks and Documents</a></li>
</ul>

            
          
    <a href= "genindex.html">General Index</a>
    <a href= "py-modindex.html">Python Modules Index</a>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pycompwa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Python UI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/ComPWA/pycompwa/blob/master/doc/source/python-ui.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-ui">
<span id="id1"></span><h1>Python UI<a class="headerlink" href="#python-ui" title="Permalink to this headline">¶</a></h1>
<p>The Python User Interface is a python module named <code class="code docutils literal notranslate"><span class="pre">ui</span></code>, built with
<a class="reference external" href="https://pybind11.readthedocs.io/en/stable/index.html">pybind11</a>.
It is the recommended way to use ComPWA, since the user benefits from the
python ease of use.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because the Python UI calls the c++ code in the background, you do not have
to worry about speed. It runs just as fast ;)</p>
</div>
<p>Since the Python UI just binds to the c++ user interface code, there is a strong
correlation between the two. It’s useful to read more about the
<a class="reference external" href="https://compwa.github.io/ComPWA">ComPWA modules</a>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>On how to use the Python UI, also refer to the
<a class="reference internal" href="examples.html#examples"><span class="std std-ref">examples section</span></a>.</p>
</div>
<p>The Python UI enables you to perform all of the tasks needed for your partial
wave analysis:</p>
<div class="section" id="read-and-write-data-samples">
<span id="dataio"></span><h2>Read and Write Data Samples<a class="headerlink" href="#read-and-write-data-samples" title="Permalink to this headline">¶</a></h2>
<p>For Python users, it is recommended to first load the data into a common format
via numpy or pandas and then construct :class:<a href="#id2"><span class="problematic" id="id3">`</span></a>.Event`s.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">Event</code></dt>
<dd><dl class="method">
<dt>
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self: pycompwa.ui.Event</em>, <em class="sig-param">four_momenta: pycompwa.ui.FourMomentumList</em>, <em class="sig-param">weight: float = 1</em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">four_momenta</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">weight</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">FourMomentum</code></dt>
<dd><dl class="method">
<dt>
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self: pycompwa.ui.FourMomentum, p4: List[float[4]]</em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd><p>Construct a FourMomentum from a four vector as a list of the form [px, py, pz, E] and a pid.</p>
</dd></dl>

</dd></dl>

<p>The procedure is explained <a class="reference internal" href="examples.html#example-datainput"><span class="std std-ref">here</span></a> in more detail.</p>
<p>Alternatively, the reading and writing of ROOT files is supported via the
following functions.</p>
<dl class="function">
<dt>
<code class="sig-name descname">read_root_data</code><span class="sig-paren">(</span><em class="sig-param">input_file: str</em>, <em class="sig-param">tree_name: str = 'events'</em>, <em class="sig-param">number_of_events: int = -1</em><span class="sig-paren">)</span> &#x2192; pycompwa.ui.EventCollection</dt>
<dd><p>Read ROOT tree from file to an EventList.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">write_root_data</code><span class="sig-paren">(</span><em class="sig-param">event_list: pycompwa.ui.EventCollection</em>, <em class="sig-param">output_file: str</em>, <em class="sig-param">tree_name: str = 'events'</em>, <em class="sig-param">overwrite: bool = True</em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd><p>Save data as ROOT tree to file.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">read_ascii_data</code><span class="sig-paren">(</span><em class="sig-param">input_file: str</em>, <em class="sig-param">number_of_events: int = -1</em><span class="sig-paren">)</span> &#x2192; pycompwa.ui.EventCollection</dt>
<dd><p>Read ROOT tree from file to an EventList.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="sig-name descname">write_ascii_data</code><span class="sig-paren">(</span><em class="sig-param">event_list: pycompwa.ui.EventCollection</em>, <em class="sig-param">output_file: str</em>, <em class="sig-param">overwrite: bool = True</em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd><p>Save data as ROOT tree to file.</p>
</dd></dl>

</div>
<div class="section" id="generate-data-samples">
<h2>Generate Data Samples<a class="headerlink" href="#generate-data-samples" title="Permalink to this headline">¶</a></h2>
<p>With <a class="reference internal" href="_pycompwa/pycompwa.ui.html#module-pycompwa.ui" title="pycompwa.ui"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycompwa.ui</span></code></a> you can also easily create various types of Monte Carlo
data samples:</p>
<ul id="generatephsp">
<li><p>Generating phase space samples based on the Kinematics</p>
<dl class="function">
<dt>
<code class="sig-name descname">generate_phsp</code><span class="sig-paren">(</span><em class="sig-param">arg0: int</em>, <em class="sig-param">arg1: pycompwa.ui.PhaseSpaceEventGenerator</em>, <em class="sig-param">arg2: pycompwa.ui.UniformRealNumberGenerator</em><span class="sig-paren">)</span> &#x2192; pycompwa.ui.EventCollection</dt>
<dd><p>Generate phase space sample</p>
</dd></dl>

<p>A required argument is a <code class="xref py py-class docutils literal notranslate"><span class="pre">PhaseSpaceGenerator</span></code> instance. There are
currently two options: <a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.EvtGenGenerator" title="pycompwa.ui.EvtGenGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvtGenGenerator</span></code></a> and <a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.RootGenerator" title="pycompwa.ui.RootGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">RootGenerator</span></code></a>.
Using the <a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.EvtGenGenerator" title="pycompwa.ui.EvtGenGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvtGenGenerator</span></code></a> is recommended, due to numerical precision
reasons.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">EvtGenGenerator</code></dt>
<dd><dl class="method">
<dt>
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self: pycompwa.ui.EvtGenGenerator</em>, <em class="sig-param">arg0: pycompwa.ui.ParticleStateTransitionKinematicsInfo</em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd></dd></dl>

</dd></dl>

<p>To initialize such a PhaseSpaceGenerator the Kinematics information of the
reaction is required. This can be extracted from the
<a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.HelicityKinematics" title="pycompwa.ui.HelicityKinematics"><code class="xref py py-class docutils literal notranslate"><span class="pre">HelicityKinematics</span></code></a>.
Read <a class="reference internal" href="#create-kin-and-intens"><span class="std std-ref">below</span></a> on how to create such a Kinematics
instance.</p>
<p>The second argument for the <a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.generate_phsp" title="pycompwa.ui.generate_phsp"><code class="xref py py-func docutils literal notranslate"><span class="pre">generate_phsp()</span></code></a> function is a random number
generator. Here also two options exist:</p>
<ul>
<li><dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">StdUniformRealGenerator</code></dt>
<dd><dl class="method">
<dt>
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self: pycompwa.ui.StdUniformRealGenerator</em>, <em class="sig-param">arg0: int</em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd></dd></dl>

</dd></dl>

</li>
<li><dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">RootUniformRealGenerator</code></dt>
<dd><dl class="method">
<dt>
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self: pycompwa.ui.RootUniformRealGenerator</em>, <em class="sig-param">arg0: int</em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd></dd></dl>

</dd></dl>

</li>
</ul>
</li>
<li><p>Generating data samples based on a Intensity</p>
<p>The usage is similar to the <a class="reference internal" href="#generatephsp"><span class="std std-ref">phase space generation</span></a>. Now
the Intensity has to be given as an additional argument. A hit-or-miss based
sampling will be performed.</p>
<dl class="function">
<dt>
<code class="sig-name descname">generate</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>generate(size: int, kinematics: pycompwa.ui.Kinematics, phsp_generator: pycompwa.ui.PhaseSpaceEventGenerator, intensity: pycompwa.ui.Intensity, random_generator: pycompwa.ui.UniformRealNumberGenerator) -&gt; pycompwa.ui.EventCollection</p></li>
</ol>
<p>Generate sample from an Intensity</p>
<ol class="arabic simple" start="2">
<li><p>generate(size: int, kinematics: pycompwa.ui.Kinematics, generator: pycompwa.ui.UniformRealNumberGenerator, intensity: pycompwa.ui.Intensity, phsp_sample: pycompwa.ui.EventCollection) -&gt; pycompwa.ui.EventCollection</p></li>
</ol>
<p>Generate sample from an Intensity, using a given phase space sample.</p>
<ol class="arabic simple" start="3">
<li><p>generate(size: int, kinematics: pycompwa.ui.Kinematics, generator: pycompwa.ui.UniformRealNumberGenerator, intensity: pycompwa.ui.Intensity, phsp_sample: pycompwa.ui.EventCollection, toy_phsp_sample: pycompwa.ui.EventCollection = None) -&gt; pycompwa.ui.EventCollection</p></li>
</ol>
<p>Generate sample from an Intensity. In case that detector reconstruction and selection is considered in the phase space sample a second pure toy sample needs to be passed.</p>
</dd></dl>

</li>
<li><p>Generating an importance weighted phase space sample</p>
<dl class="function">
<dt>
<code class="sig-name descname">generate_importance_sampled_phsp</code><span class="sig-paren">(</span><em class="sig-param">size: int</em>, <em class="sig-param">kinematics: pycompwa.ui.Kinematics</em>, <em class="sig-param">generator: pycompwa.ui.PhaseSpaceEventGenerator</em>, <em class="sig-param">intensity: pycompwa.ui.Intensity</em>, <em class="sig-param">random_generator: pycompwa.ui.UniformRealNumberGenerator</em><span class="sig-paren">)</span> &#x2192; pycompwa.ui.EventCollection</dt>
<dd><p>Generate an Intensity importance weighted phase space sample</p>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The current implementation is simple and uniformly generates events in the
phase space domain. Depending on the shape of your Intensity, this can be
quite computation intensive. However, ideally you would only run this once
for a specific reaction.</p>
</div>
</li>
</ul>
</div>
<div class="section" id="loading-and-defining-particles">
<span id="loadparticles"></span><h2>Loading and Defining Particles<a class="headerlink" href="#loading-and-defining-particles" title="Permalink to this headline">¶</a></h2>
<p>Particles can loaded and stored inside a <a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.PartList" title="pycompwa.ui.PartList"><code class="xref py py-class docutils literal notranslate"><span class="pre">PartList</span></code></a>.</p>
<dl class="function">
<dt>
<code class="sig-name descname">read_particles</code><span class="sig-paren">(</span><em class="sig-param">xml_filename: str</em><span class="sig-paren">)</span> &#x2192; pycompwa.ui.PartList</dt>
<dd><p>Read particles from a xml file.</p>
</dd></dl>

<p>Also particles can be inserted to an existing <a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.PartList" title="pycompwa.ui.PartList"><code class="xref py py-class docutils literal notranslate"><span class="pre">PartList</span></code></a>, overwriting
already existing particles.</p>
<dl class="function">
<dt>
<code class="sig-name descname">insert_particles</code><span class="sig-paren">(</span><em class="sig-param">arg0: pycompwa.ui.PartList</em>, <em class="sig-param">arg1: str</em><span class="sig-paren">)</span> &#x2192; None</dt>
<dd><p>Insert particles to a list from a xml file. Already defined particles will be overwritten!</p>
</dd></dl>

</div>
<div class="section" id="create-a-kinematics-and-intensity-instance-from-a-description">
<span id="create-kin-and-intens"></span><h2>Create a Kinematics and Intensity Instance from a Description<a class="headerlink" href="#create-a-kinematics-and-intensity-instance-from-a-description" title="Permalink to this headline">¶</a></h2>
<p>As a prerequisite a <a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.PartList" title="pycompwa.ui.PartList"><code class="xref py py-class docutils literal notranslate"><span class="pre">PartList</span></code></a> has to be already loaded.</p>
<p>A HelicityKinematics instance can be created with
<a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.create_helicity_kinematics" title="pycompwa.ui.create_helicity_kinematics"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_helicity_kinematics()</span></code></a></p>
<dl class="function">
<dt>
<code class="sig-name descname">create_helicity_kinematics</code><span class="sig-paren">(</span><em class="sig-param">xml_filename: str</em>, <em class="sig-param">particle_list: pycompwa.ui.PartList</em><span class="sig-paren">)</span> &#x2192; pycompwa.ui.HelicityKinematics</dt>
<dd><p>Create a helicity kinematics from a xml file. The file should contain a kinematics section.</p>
</dd></dl>

<p>Analogous a Intensity instance can be created with
<code class="xref py py-func docutils literal notranslate"><span class="pre">IntensityBuilderXML.create_intensity()</span></code></p>
<dl class="function">
<dt>
<code class="sig-name descname">create_intensity</code><span class="sig-paren">(</span><em class="sig-param">self: pycompwa.ui.IntensityBuilderXML</em><span class="sig-paren">)</span> &#x2192; pycompwa.ui.FunctionTreeIntensity</dt>
<dd></dd></dl>

<p>Here the order of execution is important and can be slightly confusing.
In order to fit an Intensity to a data sample, the Intensity has to be
normalized (when using an unbinned log likelihood estimator). Because the
normalization is performed by MC integration, a phase space sample is needed.
This however requires a Kinematics instance. Therefore the order of execution
is:</p>
<ol class="arabic simple">
<li><p>Create/Load a <a class="reference internal" href="_pycompwa/pycompwa.ui.html#pycompwa.ui.PartList" title="pycompwa.ui.PartList"><code class="xref py py-class docutils literal notranslate"><span class="pre">PartList</span></code></a></p></li>
<li><p>Create a Kinematics instance</p></li>
<li><p>Create a phase space sample (alternatively: the data can also be
<a class="reference internal" href="#dataio"><span class="std std-ref">read from file</span></a>)</p></li>
<li><p>Create an Intensity using the phase space sample and the Kinematics instance</p></li>
</ol>
</div>
<div class="section" id="fit-an-intensity-to-a-data-sample">
<h2>Fit an Intensity to a Data Sample<a class="headerlink" href="#fit-an-intensity-to-a-data-sample" title="Permalink to this headline">¶</a></h2>
<p>Coming soon…</p>
</div>
<div class="section" id="save-a-fit-result">
<h2>Save a Fit Result<a class="headerlink" href="#save-a-fit-result" title="Permalink to this headline">¶</a></h2>
<p>Coming soon…</p>
</div>
<div class="section" id="load-and-initialize-a-previous-fit-result">
<h2>Load and Initialize a previous Fit Result<a class="headerlink" href="#load-and-initialize-a-previous-fit-result" title="Permalink to this headline">¶</a></h2>
<p>Coming soon…</p>
<p>Visualizing of data samples and Intensities can be done via the
<code class="xref py py-mod docutils literal notranslate"><span class="pre">pycompwa.plotting</span> <span class="pre">module</span></code> documented in the next section.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ComPWA Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>