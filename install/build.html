<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Build and install &mdash; pycompwa  documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Usage" href="../usage.html" />
    <link rel="prev" title="Create a virtual environment" href="virtual-environment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html"><img src="../_static/logo-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../installation.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installation-through-pip">Installation through pip</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../installation.html#interactive-installation">Interactive installation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="get-the-source-code.html">Get the source code</a></li>
<li class="toctree-l3"><a class="reference internal" href="virtual-environment.html">Create a virtual environment</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Build and install</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-setuptools">Using <code class="docutils literal notranslate"><span class="pre">setuptools</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#developer-mode">Developer Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test-the-installation">Test the installation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documents.html">Talks and Documents</a></li>
</ul>

    <a href= "../py-modindex.html">Module Index (API)</a>
    <a href= "../genindex.html">General Index</a>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pycompwa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../installation.html">Installation</a> &raquo;</li>
      <li>Build and install</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ComPWA/pycompwa/blob/main/docsinstall/build.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="virtual-environment.html" class="btn btn-neutral float-left" title="Create a virtual environment" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../usage.html" class="btn btn-neutral float-right" title="Usage" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="build-and-install">
<h1>Build and install<a class="headerlink" href="#build-and-install" title="Permalink to this headline">¶</a></h1>
<p>Once you <a class="reference internal" href="get-the-source-code.html"><span class="doc">have the source code</span></a> and have
<a class="reference internal" href="virtual-environment.html"><span class="doc">activated the virtual environment</span></a>, you’re ready to
build and install <a class="reference internal" href="../api/pycompwa.html#module-pycompwa" title="pycompwa"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pycompwa</span></code></a>.</p>
<p>When you install <a class="reference internal" href="../api/pycompwa.html#module-pycompwa" title="pycompwa"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pycompwa</span></code></a>, you are telling the system where to find it. There
are two ways of doing this:</p>
<ol class="arabic simple">
<li><p>by copying the source code and binaries to a folder known to the system
(you do this <a class="reference internal" href="#setuptools"><span class="std std-ref">with setuptools</span></a>)</p></li>
<li><p>by telling the system to directly monitor the <a class="reference internal" href="get-the-source-code.html"><span class="doc">local repository</span></a> as the installation path (we call this
<a class="reference internal" href="#developer-mode"><span class="std std-ref">‘developer mode’</span></a>).</p></li>
</ol>
<p>The second option is more dynamic, because any changes to the source code are
immediately available at runtime, which allows you to tweak the code and try
things out. When using the first option, you would have to run <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>
again to make the changes known to the system.</p>
<section id="using-setuptools">
<span id="setuptools"></span><h2>Using <code class="docutils literal notranslate"><span class="pre">setuptools</span></code><a class="headerlink" href="#using-setuptools" title="Permalink to this headline">¶</a></h2>
<p>This is easy-peasy! Just navigate to the <a class="reference internal" href="get-the-source-code.html"><span class="doc">local repository</span></a> and run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python setup.py install -- -- -j2
</pre></div>
</div>
<p>where you may change 2 to to the number of cores on your system. The build
output is written to a folder <code class="file docutils literal notranslate"><span class="pre">_skbuild</span></code> and copied to the virtual
environment directory.</p>
</section>
<section id="developer-mode">
<h2>Developer Mode<a class="headerlink" href="#developer-mode" title="Permalink to this headline">¶</a></h2>
<p>In this set-up, we first tell the virtual environment to monitor the source
code directory as an install directory. So, navigate to the base folder of the
<a class="reference internal" href="get-the-source-code.html"><span class="doc">local repository</span></a> then, depending on which
<a class="reference internal" href="virtual-environment.html"><span class="doc">virtual environment</span></a> you chose, do the
following:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">if you <a class="reference internal" href="virtual-environment.html#conda-environment"><span class="std std-ref">use a Conda environment</span></a></span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda develop .
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">if you <a class="reference internal" href="virtual-environment.html#python-venv"><span class="std std-ref">use Python venv</span></a></span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install virtualenvwrapper
<span class="nb">source</span> venv/bin/virtualenvwrapper.sh
add2virtualenv .
</pre></div>
</div>
</div>
<p>We now call <a class="reference external" href="https://cmake.org/">cmake</a> directly to build the <a class="reference external" href="https://github.com/ComPWA/ComPWA">ComPWA backend</a>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir -p build
<span class="nb">cd</span> build
cmake ..
cmake --build . -- -j2
</pre></div>
</div>
<p>The most important binary build file is the shared library for the
<a class="reference internal" href="../api/pycompwa.ui.html#module-pycompwa.ui" title="pycompwa.ui"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pycompwa.ui</span></code></a> package. You need to set a symbolic link to this file from the
<code class="file docutils literal notranslate"><span class="pre">pycompwa</span></code> source code folder:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ../src/pycompwa
rm -f ui.*.so  <span class="c1"># in case you already created a symlink</span>
ln -s ../../build/ui.*.so
</pre></div>
</div>
</section>
<section id="test-the-installation">
<h2>Test the installation<a class="headerlink" href="#test-the-installation" title="Permalink to this headline">¶</a></h2>
<p>First, navigate out of the main directory of the <a class="reference internal" href="get-the-source-code.html"><span class="doc">local repository</span></a> in order to make sure that the <a class="reference internal" href="../api/pycompwa.html#module-pycompwa" title="pycompwa"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pycompwa</span></code></a> we run is the
system installation and not the <code class="file docutils literal notranslate"><span class="pre">pycompwa</span></code> folder in the current working
directory. Then, simply launch launch a Python interpreter and run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pycompwa</span>
</pre></div>
</div>
<p>If you don’t get any error messages, all worked out nicely!</p>
<p>For more thorough testing you can run the unit tests:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> tests
pip install -r requirements.txt
pytest -m <span class="s2">&quot;not slow&quot;</span>
</pre></div>
</div>
<p>You can now go through the <a class="reference internal" href="../usage/workflow.html"><span class="doc">ComPWA Workflow</span></a> to learn how to use
<a class="reference internal" href="../api/pycompwa.html#module-pycompwa" title="pycompwa"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycompwa</span></code></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="virtual-environment.html" class="btn btn-neutral float-left" title="Create a virtual environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../usage.html" class="btn btn-neutral float-right" title="Usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>